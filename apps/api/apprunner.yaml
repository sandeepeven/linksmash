# AWS App Runner Configuration
#
# This file configures AWS App Runner service settings.
# Note: App Runner can also be configured via the AWS Console.

version: 1.0
runtime: docker
build:
  commands:
    build:
      - echo "Building LinkSmash API..."
      - docker build -t linksmash-api -f apps/api/Dockerfile .
run:
  runtime-version: 22
  command: node dist/main.js
  network:
    port: 8080
    env: PORT
  env:
    - name: NODE_ENV
      value: production
    - name: HOST
      value: "0.0.0.0"
    - name: PORT
      value: "8080"
    - name: LOG_LEVEL
      value: info
    # Add your Redis URL here or set it in AWS Console
    # - name: REDIS_URL
    #   value: "redis://your-redis-url:6379"
